1)	Creating data sets and data cleaning on Data server

•	Command line (Bash) getting the data:
    wget IPIPIPIPIPIPI/testtask/dilans_data.csv
•	Command Line (Bash) creating 3 data sets from the main: first readers, returning readers, subscribers, buyers

    cat dilans_data.csv | grep ’subscribe’ > /home/ownserver/dilans_subs.csv

    cat dilans_data.csv | grep ’buy’ > /home/ownserver/dilans_buy.csv

    cat dilans_data.csv | grep ’read’ > /home/ownserver/dilans_read.csv

•	Separating first readers and returning readers from all readers file:

    grep -E 'Reddit|AdWords|SEO' dilans_read.csv > dilans_first_read.csv

    grep -E -v 'Reddit|AdWords|SEO' dilans_read.csv > dilans_more_reads.csv

•	Creating Date and Time variables from Timestamp: 

     cat dilans_buy.csv | sed 's/ /;/' > dilans_buy_date.csv
     cat dilans_subs.csv | sed 's/ /;/' > dilans_subs_date.csv 
    cat dilans_first_read.csv | sed 's/ /;/' > dilans_first_read_date.csv 
    cat dilans_more_reads.csv | sed 's/ /;/' > dilans_more_reads_date.csv 
    cat dilans_reads.csv | sed 's/ /;/' > dilans_reads_date.csv 

 

2)	SQL Tables and Data load in Command Line


psql -U XXXX -d postgres


CREATE TABLE dilans_firstreader (
    date DATE,
    time TIME,
    event_type TEXT,
    country TEXT,
    user_id BIGINT,
    source TEXT,
    region TEXT
);

CREATE TABLE dilans_rereader (
    date DATE,
    time TIME,
    event_type TEXT,
    country TEXT,
    user_id BIGINT,
    region TEXT
);

CREATE TABLE dilans_subs (
    date DATE,
    time TIME,
    event_type TEXT,
    user_id BIGINT
);

CREATE TABLE dilans_purchase (
    date DATE,
    time TIME,
    event_type TEXT,
    user_id BIGINT,
    amount INTEGER
);

\COPY dilans_firstreader FROM '/home/ownserver/dilans_first_read_date.csv' DELIMITER ';';
\COPY dilans_rereader FROM '/home/ownserver/dilans_more_reads_date.csv' DELIMITER ';';
\COPY dilans_subs FROM '/home/ownserver/dilans_subs_date.csv' DELIMITER ';';
\COPY dilans_purchase FROM '/home/ownserver/dilans_buy_date.csv' DELIMITER ';';



3)	Data analysis topics in PostgreSQL

•	Daily trends of users: 4 segments and within buyers creating the Ebook (spending 8) and Video (spending 80) subsegments
•	Funnel analysis of users
•	Daily KPIs overview
 - Daily active users
 - Daily revenue
•	Composition of Ebook and Video buyer segments
 - Source, Country, Topic to read
 - Microsegments for communication fine-tuning
•	ROI and Netnet income per buyer segment per source
